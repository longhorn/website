{{ $sections := where site.Sections "Section" "docs" }}
{{ $here     := .here }}
<aside class="nav{{ if .drawer }} is-drawer{{ else }} is-sidebar{{ end }}">
  {{ if .drawer }}
  <div class="button-container">
    <a class="button is-borderless" id="drawer-close">
      <span class="icon">
        <ion-icon size="large" name="close-circle-outline"></ion-icon>
      </span>
    </a>
  </div>
  {{ end }}

  {{ with $sections }}
  <div class="nav-sections">
    {{ template "section" (dict "sections" $sections "here" $here) }}
  </div>
  {{ end }}
</aside>

{{ define "section" }}
{{ $here := .here }}

{{ range .sections }}
{{ $isHere := eq $here .RelPermalink }}
<div class="nav-section">
  <a class="nav-section-title{{ if $isHere }} is-active{{ end }}" href="{{ .RelPermalink }}">
    {{ .Title }}
  </a>

  {{ with .RegularPages }}
  <ul class="nav-section-pages">
    {{ range . }}
    {{ $isHere := eq $here .RelPermalink }}
    <li class="nav-section-pages-link">
      <a{{ if $isHere }} class="is-active"{{ end }} href="{{ .RelPermalink }}">
        {{ .Title }}
      </a>
    </li>
    {{ end }}
  </ul>
  {{ end }}
</div>

{{ with .Sections }}
{{ template "section" (dict "sections" .) }}
{{ end }}
{{ end }}
{{ end }}
